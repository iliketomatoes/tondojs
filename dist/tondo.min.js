/*! tondo.js - v0.0.1 - 2016-03-12
* https://github.com/iliketomatoes/tondojs
* Copyright (c) 2016 ; Licensed  */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b()):"object"==typeof module&&module.exports?module.exports=b():a.Tondo=b()}(window,function(){"use strict";function a(a,b,c,d){var e=["M",a-1,b,"a",c,c,0,1,d,1,0].join(" ");return e}function b(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}function d(a,d){var g={classes:""},h=function(a,b,c){return Object.create(f,{target:{writable:!1,value:a},GUID:{writable:!1,value:b},settings:{writable:!0,value:c},proxy:{writable:!0,value:{}}})},i=b(g,d);this.instances=[];for(var j=document.querySelectorAll(a),k=0;j[k];){var l=c();e[l]=h(j[k],l,i),e[l].init(),this.instances.push(l),k++}}var e={},f={init:function(){this.proxy.targetWidth=this.getTargetWidth(),this.proxy.gap=this.getBiggestGap(),this.setLayout()},getTargetWidth:function(){var a=this.target.clientHeight,b=this.target.clientWidth;return b>=a?a:b},getRadius:function(a){return this.proxy.targetWidth/2+a},getBiggestGap:function(){var a=0,b=this.settings.circles;for(var c in b)b[c].gap>a&&(a=b[c].gap);return a},setLayout:function(){var b,c,d,e,f,g,h,i,j,k;b=this.settings.circles,c=this.proxy.targetWidth,d=c+2*this.proxy.gap,e=document.createDocumentFragment(),f="http://www.w3.org/2000/svg",g="http://www.w3.org/1999/xlink",h=document.createElementNS(f,"svg"),h.setAttribute("class",this.settings.classes),h.setAttribute("width",d),h.setAttribute("height",d),h.setAttribute("data-tondo-id",this.GUID),i=this.target.parentNode.clientHeight-d,h.style.left=i/2+this.target.offsetLeft+"px",h.style.top=i/2+this.target.offsetTop+"px",j=[0,0,d,d].join(" "),h.setAttribute("viewBox",j),k=document.createElementNS(f,"defs");for(var l in b){var m,n,o,p,q,r,s,t;if(m=b[l].radius||this.getRadius(b[l].gap),n=this.GUID+"_"+l+"_"+b[l].side,o=document.createElementNS(f,"path"),o.setAttribute("id",n),"up"===b[l].side)o.setAttribute("d",a(d/2,d-(this.proxy.gap-b[l].gap),m,1));else{var u=0>i?-i:0;o.setAttribute("d",a(d/2,u,m,0))}k.appendChild(o),p=document.createElementNS(f,"g"),q=document.createElementNS(f,"use"),q.setAttributeNS(g,"href","#"+n),p.appendChild(q),r=document.createElementNS(f,"textPath"),r.setAttributeNS(g,"href","#"+n),r.setAttribute("startOffset","50%"),r.setAttribute("text-anchor","middle"),s=b[l].text,r.textContent=s,t=document.createElementNS(f,"text"),t.appendChild(r),p.appendChild(t),h.appendChild(k),h.appendChild(p)}e.appendChild(h),this.target.parentNode.appendChild(e)}};return d});